# ðŸ” FreeRTOS Mutex ì˜ˆì œ

## 1.ëª©ì  (Objective)

ì´ ì˜ˆì œëŠ” FreeRTOSì—ì„œ `ë®¤í…ìŠ¤(Mutex)`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘ ê°œì˜ íƒœìŠ¤í¬(Task)ê°€ ê³µìœ  ìžì›ì— `ë™ì‹œì— ì ‘ê·¼í•˜ì§€ ì•Šë„ë¡ ë³´í˜¸`í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## 2.ì‹œìŠ¤í…œ êµ¬ì„± (System Configuration)

| êµ¬ì„± ìš”ì†Œ        | ì„¤ëª…                                |
|-----------------|-------------------------------------|
| RTOS            | FreeRTOS                           |
| Task1           | Mutexë¥¼ ì–»ê³  1ì´ˆê°„ ìžì› ì‚¬ìš©       |
| Task2           | Mutexë¥¼ ì–»ê³  1ì´ˆê°„ ìžì› ì‚¬ìš©       |
| Synchronization | Mutex (`xSemaphoreCreateMutex`) ì‚¬ìš© |

---

## 3.ë™ìž‘ ì‹œë‚˜ë¦¬ì˜¤ (Execution Flow)

1. ì‹œìŠ¤í…œ ì‹œìž‘ ì‹œ Mutex ìƒì„±
2. `Task1`, `Task2`ëŠ” ê°ê° 1ì´ˆë§ˆë‹¤ Mutexë¥¼ ìš”ì²­
3. ë¨¼ì € Mutexë¥¼ ì–»ì€ Taskë§Œ ê³µìœ  ìžì› ì‚¬ìš© ê°€ëŠ¥
4. ë‹¤ë¥¸ TaskëŠ” Mutexê°€ ë°˜í™˜ë  ë•Œê¹Œì§€ ëŒ€ê¸°
5. ê³µìœ  ìžì› ì‚¬ìš© í›„ Mutex ë°˜í™˜
6. ë‘ TaskëŠ” ë²ˆê°ˆì•„ ìžì›ì— ì ‘ê·¼í•˜ë©° êµëŒ€ë¡œ ì‹¤í–‰



## 4.ì£¼ìš” í•¨ìˆ˜ (Key Functions)

| í•¨ìˆ˜ëª…              | ì„¤ëª…                                 |
|--------------------|--------------------------------------|
| `xSemaphoreCreateMutex()` | Mutex ê°ì²´ ìƒì„±                    |
| `xSemaphoreTake()`       | Mutex íšë“ ì‹œë„                    |
| `xSemaphoreGive()`       | Mutex ë°˜í™˜                         |
| `vTaskDelay()`           | ì§€ì •ëœ ì‹œê°„ë§Œí¼ Task ëŒ€ê¸° ìƒíƒœë¡œ ì „í™˜ |
| `vTaskStartScheduler()`  | FreeRTOS ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œìž‘             |



## 5.UART ì¶œë ¥ ì˜ˆì‹œ (Expected UART Output)
```
ðŸ”µ Task1: Mutex ì–»ìŒ
ðŸ”µ Task1: Mutex ë°˜í™˜
ðŸŸ¢ Task2: Mutex ì–»ìŒ
ðŸŸ¢ Task2: Mutex ë°˜í™˜
ðŸ”µ Task1: Mutex ì–»ìŒ
```

## 6.ì‹œí€€ìŠ¤ë‹¤ì´ì–´ê·¸ëž¨
```plantuml
@startuml
actor "Task1" as T1
actor "Task2" as T2
participant "xMutex" as M

== ì´ˆê¸° ìƒíƒœ ==
T1 -> M : xSemaphoreTake(xMutex)
activate T1
M --> T1 : pdTRUE
T1 -> T1 : ê³µìœ  ìžì› ì‚¬ìš© (1ì´ˆ)
T1 -> M : xSemaphoreGive(xMutex)
deactivate T1

== Task2 ëŒ€ê¸° ì¤‘ ==
T2 -> M : xSemaphoreTake(xMutex)
activate T2
M --> T2 : pdTRUE
T2 -> T2 : ê³µìœ  ìžì› ì‚¬ìš© (1ì´ˆ)
T2 -> M : xSemaphoreGive(xMutex)
deactivate T2

== ë‹¤ìŒ ë£¨í”„ ==
T1 -> M : xSemaphoreTake(xMutex)
activate T1
M --> T1 : pdTRUE
T1 -> T1 : ê³µìœ  ìžì› ì‚¬ìš© (1ì´ˆ)
T1 -> M : xSemaphoreGive(xMutex)
deactivate T1

@enduml

```