\chapter{🧵 Free\+RTOS Task Parameter 예제 튜토리얼 }
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n}{}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n}\index{🧵 FreeRTOS Task Parameter 예제 튜토리얼@{🧵 FreeRTOS Task Parameter 예제 튜토리얼}}
\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md12}%
\Hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md12}%


이 문서는 두 개의 Free\+RTOS 태스크가 각각 다른 메시지를 UART로 출력하고, LED를 토글하는 예제를 통해 다음 개념들을 학습합니다\+:


\begin{DoxyItemize}
\item Task에 파라미터 전달
\item 동일 우선순위 Task 간 {\bfseries{라운드 로빈(Round-\/\+Robin)}} 동작
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}컨텍스트 스위칭\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}이 어떻게 일어나는지 이해
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md14}{}\doxysection{\texorpdfstring{1. Objective (목표)}{1. Objective (목표)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md14}

\begin{DoxyItemize}
\item Free\+RTOS Task에 문자열 메시지를 {\bfseries{파라미터로 전달\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}하는 방법 학습}}
\item {\bfseries{전달받은 메시지를 \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+UART로 주기적으로 출력}}
\item Task마다 LED를 토글하며 실행 중임을 표시
\item 동일 우선순위 Task 간 {\bfseries{공정한 CPU 시간 분배}} 구조를 체험(라운드로빈)
\item 1초마다 각각의 TASK 수행되어야 하지만, 라운드 로빈발생
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md16}{}\doxysection{\texorpdfstring{2. 🔧 주요 구성 요소}{2. 🔧 주요 구성 요소}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md16}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 구성 요소  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 구성 요소  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endhead
{\ttfamily \doxylink{1__2__task__roundrobin_8c_a902a64ca782182bd7360b69639f74063}{Task1()}}  &{\ttfamily "{}\+Task1 Msg"{}} 출력, LD1 토글  \\\cline{1-2}
{\ttfamily \doxylink{1__2__task__roundrobin_8c_af01c7f41ef35453d7c0e896db918be88}{Task2()}}  &{\ttfamily "{}\+Task2 Msg"{}} 출력, LD2 토글  \\\cline{1-2}
{\ttfamily x\+Task\+Create()}  &Task 생성 시 파라미터({\ttfamily const char\texorpdfstring{$\ast$}{*}}) 전달  \\\cline{1-2}
우선순위  &두 Task 모두 {\ttfamily priority = 1} (라운드 로빈 발생)  \\\cline{1-2}
\end{longtabu}


\DoxyHorRuler{0}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md18}{}\doxysection{\texorpdfstring{3. 주요 코드 요약}{3. 주요 코드 요약}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md18}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md19}{}\doxysubsection{\texorpdfstring{전역 문자열 정의}{전역 문자열 정의}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md19}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{1__2__task__roundrobin_8c_a8ef4f5ae2af877dac0d1ef5e5960e9ce}{task1\_msg}}\ =\ \textcolor{stringliteral}{"{}Task1\ Msg\ \ !\(\backslash\)r\(\backslash\)n"{}};}
\DoxyCodeLine{\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{1__2__task__roundrobin_8c_ac3981b111cfd2a9f6c62ca747094c8e1}{task2\_msg}}\ =\ \textcolor{stringliteral}{"{}Task2\ Msg\ \ !\(\backslash\)r\(\backslash\)n"{}};}
\DoxyCodeLine{\ Task\ 함수\ (공통\ 구조)}

\end{DoxyCode}
 c void Task\+X(void $<$em$>$pv\+Parameters) \{ const char msg = (const char\texorpdfstring{$\ast$}{*}) pv\+Parameters; while (1) \{ HAL\+\_\+\+UART\+\_\+\+Transmit(\&huart3, (uint8\+\_\+t \texorpdfstring{$\ast$}{*})msg, strlen(msg), HAL\+\_\+\+MAX\+\_\+\+DELAY); HAL\+\_\+\+GPIO\+\_\+\+Toggle\+Pin(\+GPIOB, LDx\+\_\+\+Pin); v\+Task\+Delay(pd\+MS\+\_\+\+TO\+\_\+\+TICKS(1000)); \} \} main 함수 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{1__1__task__simpletask_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{driver__init_8h_aab7f079e70f08c868bbb3fdd41b86f82}{Driver\_Init}}();}
\DoxyCodeLine{\ \ \ \ xTaskCreate(\mbox{\hyperlink{1__2__task__roundrobin_8c_a902a64ca782182bd7360b69639f74063}{Task1}},\ \textcolor{stringliteral}{"{}Task1"{}},\ 256,\ (\textcolor{keywordtype}{void}*)\mbox{\hyperlink{1__2__task__roundrobin_8c_a8ef4f5ae2af877dac0d1ef5e5960e9ce}{task1\_msg}},\ 1,\ NULL);}
\DoxyCodeLine{\ \ \ \ xTaskCreate(\mbox{\hyperlink{1__2__task__roundrobin_8c_af01c7f41ef35453d7c0e896db918be88}{Task2}},\ \textcolor{stringliteral}{"{}Task2"{}},\ 256,\ (\textcolor{keywordtype}{void}*)\mbox{\hyperlink{1__2__task__roundrobin_8c_ac3981b111cfd2a9f6c62ca747094c8e1}{task2\_msg}},\ 1,\ NULL);}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{task_8h_aaf9dca1065c60abdeb309d56ab7293cb}{vTaskStartScheduler}}();}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{\}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 \hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md20}{}\doxysection{\texorpdfstring{4. 라운드 로빈 \& 컨텍스트 스위칭}{4. 라운드 로빈 \& 컨텍스트 스위칭}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md20}
Task1과 Task2는 동일한 우선순위(1) 를 가지므로,

Free\+RTOS는 Tick 마다 번갈아 Task를 실행합니다.

\doxylink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{v\+Task\+Delay()}가 호출되면 해당 Task는 Block 상태가 되고, 다른 Ready 상태 Task가 즉시 실행됩니다.

이 방식은 Round-\/\+Robin 스케줄링이며, 모든 동일 우선순위 Task에 공평하게 CPU를 분배합니다.\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md21}{}\doxysection{\texorpdfstring{5. 시퀀스 다이어그램 (Plant\+UML)}{5. 시퀀스 다이어그램 (Plant\+UML)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md21}

\begin{DoxyCode}{0}
\DoxyCodeLine{@startuml}
\DoxyCodeLine{actor\ Main}
\DoxyCodeLine{participant\ Task1}
\DoxyCodeLine{participant\ Task2}
\DoxyCodeLine{participant\ UART}
\DoxyCodeLine{participant\ LED}
\DoxyCodeLine{}
\DoxyCodeLine{Main\ -\/>\ Task1\ :\ xTaskCreate(Task1,\ priority=1)}
\DoxyCodeLine{Main\ -\/>\ Task2\ :\ xTaskCreate(Task2,\ priority=1)}
\DoxyCodeLine{Main\ -\/>\ Main\ :\ vTaskStartScheduler()}
\DoxyCodeLine{}
\DoxyCodeLine{loop\ 1초\ 주기}
\DoxyCodeLine{\ \ \ \ Task1\ -\/>\ UART\ :\ HAL\_UART\_Transmit("{}Task1\ Msg"{})}
\DoxyCodeLine{\ \ \ \ Task1\ -\/>\ LED\ :\ Toggle\ LD1}
\DoxyCodeLine{\ \ \ \ Task1\ -\/>\ Task1\ :\ vTaskDelay(1000ms)}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ Task2\ -\/>\ UART\ :\ HAL\_UART\_Transmit("{}Task2\ Msg"{})}
\DoxyCodeLine{\ \ \ \ Task2\ -\/>\ LED\ :\ Toggle\ LD2}
\DoxyCodeLine{\ \ \ \ Task2\ -\/>\ Task2\ :\ vTaskDelay(1000ms)}
\DoxyCodeLine{end}
\DoxyCodeLine{@enduml}

\end{DoxyCode}
 👉 위 다이어그램은 \href{https://plantuml-editor.kkeisuke.com/\%EC\%97\%90\%EC\%84\%9C}{\texttt{https\+://plantuml-\/editor.\+kkeisuke.\+com/에서}} 붙여넣으면 확인 가능합니다.\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md22}{}\doxysection{\texorpdfstring{6. 요약}{6. 요약}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md22}
항목 설명 pv\+Parameters Task에 사용자 지정 메시지 전달 x\+Task\+Create() Task 등록 및 파라미터 설정 \doxylink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{v\+Task\+Delay()} Task를 일정 시간 동안 Block 상태로 전환 라운드 로빈 스케줄링 동일 우선순위 Task 간 CPU 분배 컨텍스트 스위칭 실행 중 Task → 다른 Task 전환\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md23}{}\doxysection{\texorpdfstring{7. 활용 아이디어}{7. 활용 아이디어}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md23}
여러 디바이스 상태를 주기적으로 출력하는 구조 설계 동일 코드 기반 Task 재사용 시, 파라미터만 변경하여 동작 분기 상태 모니터링, 디버깅, LED 점멸 제어 등 Task 간 역할 분담\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md24}{}\doxysection{\texorpdfstring{8. 결론}{8. 결론}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_21__2___t_a_s_k___r_o_u_n_d_r_o_b_i_n_autotoc_md24}
이 예제는 Free\+RTOS의 Task 기본 개념을 실습하며 다음을 이해할 수 있도록 돕습니다\+: Task에 문자열 파라미터를 전달하고 사용하는 방법 동일 우선순위 Task 간 라운드 로빈 방식 스케줄링 v\+Task\+Delay와 컨텍스트 스위칭의 실동작 구조 구조화된 Task 설계와 UART + GPIO 활용 