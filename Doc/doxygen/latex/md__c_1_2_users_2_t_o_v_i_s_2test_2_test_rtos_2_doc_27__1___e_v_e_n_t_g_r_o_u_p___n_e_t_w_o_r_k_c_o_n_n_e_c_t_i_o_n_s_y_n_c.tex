\chapter{7\+\_\+1\+\_\+\+EVENTGROUP\+\_\+\+NETWORKCONNECTIONSYNC }
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c}{}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c}\index{7\_1\_EVENTGROUP\_NETWORKCONNECTIONSYNC@{7\_1\_EVENTGROUP\_NETWORKCONNECTIONSYNC}}
EVENTGROUP\+\_\+\+NETWORKCONNECTIONSYNC.\+C 튜토리얼 이 문서는 EVENTGROUP\+\_\+\+NETWORKCONNECTIONSYNC.\+C 예제 코드의 목표, 코드 설명, 예상 출력, 동작 시퀀스, 그리고 핵심 개념에 대해 설명합니다.\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md151}{}\doxysection{\texorpdfstring{1. Objective (목표)}{1. Objective (목표)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md151}
이 예제의 목적은 Free\+RTOS의 Event Group을 사용하여 \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}여러 비동기 작업(\+Task)\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}의 완료 여부를 동기화하는 방법을 보여주는 것입니다. 특히, 네트워크 초기화 시나리오처럼 \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}여러 서브시스템(Task1, Task2 등)\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}이 준비될 때까지 메인 태스크가 기다렸다가 한 번에 진행하는 구조를 설명합니다.\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md152}{}\doxysection{\texorpdfstring{2. Code Description (코드 설명)}{2. Code Description (코드 설명)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md152}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ WIFI\_CONNECTED\_BIT\ \ \ (1\ <<\ 0)\ \ \ }\textcolor{comment}{//\ vTask1\ 완료\ 비트}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ SERVER\_CONNECTED\_BIT\ \ \ (1\ <<\ 1)\ \ \ }\textcolor{comment}{//\ vTask2\ 완료\ 비트}}

\end{DoxyCode}
 Event Group 내에서 각 작업 완료 여부를 나타내는 비트 마스크입니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{/*\ \ Wi-\/Fi\ 연결\ Task\ */}}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_ae3e03c194f2c2ead94b26d8e1a8f1688}{vWifiConnectTask}}(\textcolor{keywordtype}{void}\ *pvParameters)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(\mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(1000));\ \ \textcolor{comment}{//\ Wi-\/Fi\ 연결에\ 1초\ 소요되는\ 시뮬레이션}}
\DoxyCodeLine{\ \ \ \ printf(\textcolor{stringliteral}{"{}[Tick\ \%lu]\ \ Wi-\/Fi\ 연결\ 완료\(\backslash\)n"{}},\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}());}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{event__groups_8c_a9ac7cd970f50e2e50a494b656e0eb239}{xEventGroupSetBits}}(\mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_a23235b0baa8a2582eb7db3a681345615}{xEventGroup}},\ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_ad552e7688532cbbecd3967538ced06ac}{WIFI\_CONNECTED\_BIT}});}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{task_8h_a27ff4ebce26565bef136bda84201ff80}{vTaskDelete}}(NULL);}
\DoxyCodeLine{\}}

\end{DoxyCode}
 v\+Wifi\+Connect\+Task는 1000ms 후 완료되며, 완료 시 자신의 비트를 \doxylink{event__groups_8c_a9ac7cd970f50e2e50a494b656e0eb239}{x\+Event\+Group\+Set\+Bits()}를 통해 설정합니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_ab6bac22f89d6f07bbfd989d4b32c18a2}{vDataTask}}(\textcolor{keywordtype}{void}\ *pvParameters)\ \{}
\DoxyCodeLine{\ \ \ \ printf(\textcolor{stringliteral}{"{}[Tick\ \%lu]\ \ 데이터\ 전송을\ 위해\ 연결\ 대기\ 중...\(\backslash\)n"{}},\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}());}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{event__groups_8c_a379c5cca4552d3d8acd4c51e8220a6c3}{xEventGroupWaitBits}}(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_a23235b0baa8a2582eb7db3a681345615}{xEventGroup}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_ad552e7688532cbbecd3967538ced06ac}{WIFI\_CONNECTED\_BIT}}\ |\ \mbox{\hyperlink{7__1__eventgroup__networkconnectionsync_8c_a4356ddcf111d352d6f05054a770838c6}{SERVER\_CONNECTED\_BIT}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE}},\ \ \ \ \ \textcolor{comment}{//\ 비트\ 자동\ 클리어}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE}},\ \ \ \ \ \textcolor{comment}{//\ 모든\ 비트가\ Set될\ 때까지\ 대기\ (AND\ 조건)}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{portmacro_8h_a72723ba1e4a85ca14f25c2b9e066613d}{portMAX\_DELAY}}}
\DoxyCodeLine{\ \ \ \ );}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ printf(\textcolor{stringliteral}{"{}[Tick\ \%lu]\ \ 모든\ 연결\ 완료됨.\ 데이터\ 전송\ 시작!\(\backslash\)n"{}},\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}());}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}[Tick\ \%lu]\ \ 주기적\ 데이터\ 전송\ 중...\(\backslash\)n"{}},\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}());}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(\mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(2000));}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
 두 Task가 완료될 때까지 \doxylink{event__groups_8c_a379c5cca4552d3d8acd4c51e8220a6c3}{x\+Event\+Group\+Wait\+Bits()}로 대기합니다. pd\+TRUE로 설정된 clear\+On\+Exit 덕분에 비트는 자동 클리어됩니다. pd\+TRUE로 설정된 wait\+For\+All\+Bits 덕분에 AND 조건으로 두 비트가 모두 설정되어야 다음으로 진행합니다.\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md153}{}\doxysection{\texorpdfstring{3. Expected Output (예상 결과)}{3. Expected Output (예상 결과)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md153}

\begin{DoxyCode}{0}
\DoxyCodeLine{Main\ Task:\ 두\ 작업\ 완료\ 대기\ 중...}
\DoxyCodeLine{Task1\ 작업\ 완료}
\DoxyCodeLine{Task2\ 작업\ 완료}
\DoxyCodeLine{Main\ Task:\ 모든\ 작업\ 완료됨,\ 계속\ 진행!}
\DoxyCodeLine{작업\ 순서는\ 다음과\ 같이\ 진행됩니다:}
\DoxyCodeLine{Main\ Task가\ 대기\ 상태로\ 진입}
\DoxyCodeLine{Task1이\ 먼저\ 완료되며\ 비트를\ 설정}
\DoxyCodeLine{Task2가\ 이후\ 완료되며\ 비트를\ 설정}
\DoxyCodeLine{}
\DoxyCodeLine{두\ 비트가\ 모두\ 설정되었으므로\ Main\ Task가\ 깨어나고\ 작업을\ 이어감}

\end{DoxyCode}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md154}{}\doxysection{\texorpdfstring{4. 시퀀스 다이어그램 (Mermaid Diagram)}{4. 시퀀스 다이어그램 (Mermaid Diagram)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md154}

\begin{DoxyCode}{0}
\DoxyCodeLine{@startuml}
\DoxyCodeLine{actor\ Main}
\DoxyCodeLine{participant\ WiFiTask}
\DoxyCodeLine{participant\ ServerTask}
\DoxyCodeLine{participant\ SendTask}
\DoxyCodeLine{participant\ EventGroup}
\DoxyCodeLine{}
\DoxyCodeLine{Main\ -\/>\ EventGroup\ :\ xEventGroupCreate()}
\DoxyCodeLine{Main\ -\/>\ WiFiTask\ :\ xTaskCreate(vWiFiTask)}
\DoxyCodeLine{Main\ -\/>\ ServerTask\ :\ xTaskCreate(vServerTask)}
\DoxyCodeLine{Main\ -\/>\ SendTask\ :\ xTaskCreate(vSendTask)}
\DoxyCodeLine{Main\ -\/>\ Main\ :\ vTaskStartScheduler()}
\DoxyCodeLine{}
\DoxyCodeLine{==\ WiFi\ 연결\ Task\ ==}
\DoxyCodeLine{}
\DoxyCodeLine{WiFiTask\ -\/>\ WiFiTask\ :\ vTaskDelay(1000ms)}
\DoxyCodeLine{WiFiTask\ -\/>\ WiFiTask\ :\ printf("{}📶\ Wi-\/Fi\ 연결\ 완료"{})}
\DoxyCodeLine{WiFiTask\ -\/>\ EventGroup\ :\ xEventGroupSetBits(BIT\_WIFI\_READY)}
\DoxyCodeLine{WiFiTask\ -\/>\ WiFiTask\ :\ vTaskDelete()}
\DoxyCodeLine{}
\DoxyCodeLine{==\ 서버\ 연결\ Task\ ==}
\DoxyCodeLine{}
\DoxyCodeLine{ServerTask\ -\/>\ ServerTask\ :\ vTaskDelay(2000ms)}
\DoxyCodeLine{ServerTask\ -\/>\ ServerTask\ :\ printf("{}🖥️\ 서버\ 연결\ 완료"{})}
\DoxyCodeLine{ServerTask\ -\/>\ EventGroup\ :\ xEventGroupSetBits(BIT\_SERVER\_READY)}
\DoxyCodeLine{ServerTask\ -\/>\ ServerTask\ :\ vTaskDelete()}
\DoxyCodeLine{}
\DoxyCodeLine{==\ 데이터\ 전송\ Task\ ==}
\DoxyCodeLine{}
\DoxyCodeLine{SendTask\ -\/>\ SendTask\ :\ printf("{}📦\ 연결\ 대기\ 중..."{})}
\DoxyCodeLine{SendTask\ -\/>\ EventGroup\ :\ xEventGroupWaitBits(BIT\_WIFI\_READY\ |\ BIT\_SERVER\_READY)}
\DoxyCodeLine{alt\ 둘\ 다\ Set됨}
\DoxyCodeLine{\ \ \ \ SendTask\ -\/>\ SendTask\ :\ printf("{}✅\ 모든\ 연결\ 완료!"{})}
\DoxyCodeLine{\ \ \ \ SendTask\ -\/>\ SendTask\ :\ 데이터\ 전송\ 시작}
\DoxyCodeLine{end}
\DoxyCodeLine{SendTask\ -\/>\ SendTask\ :\ vTaskDelete()}
\DoxyCodeLine{@enduml}

\end{DoxyCode}
 \hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md155}{}\doxysection{\texorpdfstring{5. 핵심 개념 정리}{5. 핵심 개념 정리}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md155}
개념 설명 Event Group 여러 비트를 하나의 그룹으로 관리하여 여러 Task의 상태를 동기화하는 데 유용 \doxylink{event__groups_8c_a9ac7cd970f50e2e50a494b656e0eb239}{x\+Event\+Group\+Set\+Bits()} 특정 비트를 설정 (작업 완료 표시 등) \doxylink{event__groups_8c_a379c5cca4552d3d8acd4c51e8220a6c3}{x\+Event\+Group\+Wait\+Bits()} 지정된 조건이 충족될 때까지 Task를 Blocked 상태로 유지 pd\+TRUE (AND 조건) 모든 비트가 설정되어야만 대기 해제 pd\+FALSE (OR 조건) 하나라도 설정되면 즉시 해제됨 자동 클리어 (pd\+TRUE) 조건 충족 후 해당 비트들을 자동으로 0으로 초기화\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md156}{}\doxysection{\texorpdfstring{6. 활용 시나리오}{6. 활용 시나리오}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_27__1___e_v_e_n_t_g_r_o_u_p___n_e_t_w_o_r_k_c_o_n_n_e_c_t_i_o_n_s_y_n_c_autotoc_md156}
네트워크 구성 준비 완료까지 대기

센서 초기화 Task 모두 완료될 때까지 메인 동작 보류

다중 외부 장치 연결이 완료될 때까지 동기화 처리 