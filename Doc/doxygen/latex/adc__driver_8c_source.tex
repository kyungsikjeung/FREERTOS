\doxysection{adc\+\_\+driver.\+c}
\hypertarget{adc__driver_8c_source}{}\label{adc__driver_8c_source}\index{C:/Users/TOVIS/test/TestRtos/Core/Src/UserDriver/adc\_driver.c@{C:/Users/TOVIS/test/TestRtos/Core/Src/UserDriver/adc\_driver.c}}
\mbox{\hyperlink{adc__driver_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{adc__driver_8h}{adc\_driver.h}}"{}}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00004}00004\ \textcolor{comment}{//\ 전역\ ADC\ 드라이버\ 인스턴스}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00005}\mbox{\hyperlink{adc__driver_8h_ac07374bb1ad17983403a31fda93f4de7}{00005}}\ \mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ \mbox{\hyperlink{adc__driver_8h_ac07374bb1ad17983403a31fda93f4de7}{g\_adc\_driver}}\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00006}00006\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00007}00007\ \textcolor{comment}{//\ 내부\ 함수\ 프로토타입}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00008}00008\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ ADC\_Timer\_Callback(\mbox{\hyperlink{timers_8h_ae2aa96927b4806e5dcfd264ba7bc8bf6}{TimerHandle\_t}}\ \mbox{\hyperlink{timerperiodchange_8c_a3e934bb5849bde559bb0310c8814e5fe}{xTimer}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00015}\mbox{\hyperlink{adc__driver_8h_a4acb6ac811c38d9fbbe486ce6fca9535}{00015}}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478f}{HAL\_StatusTypeDef}}\ \mbox{\hyperlink{adc__driver_8c_a4acb6ac811c38d9fbbe486ce6fca9535}{ADC\_Driver\_Init}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00016}00016\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00017}00017\ \ \ \ \ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478f}{HAL\_StatusTypeDef}}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00019}00019\ \ \ \ \ \textcolor{comment}{//\ 주변\ 장치\ 클럭\ 활성화}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00020}00020\ \ \ \ \ \mbox{\hyperlink{group___r_c_c___a_p_b2___clock___enable___disable_gaa28c08d39ba2ec206a131f0861d7c1a1}{\_\_HAL\_RCC\_ADC1\_CLK\_ENABLE}}();}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00021}00021\ \ \ \ \ \mbox{\hyperlink{group___r_c_c___a_h_b1___clock___enable___disable_ga1b5c4bd52d8e7c70e105dd415a191afd}{\_\_HAL\_RCC\_DMA2\_CLK\_ENABLE}}();}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00023}00023\ \ \ \ \ \textcolor{comment}{//\ ADC\ 설정}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00024}00024\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_abfce5509f2d1f9d3ef9012b7b7b528fa}{Instance}}\ =\ \mbox{\hyperlink{group___peripheral__declaration_ga90d2d5c526ce5c0a551f533eccbee71a}{ADC1}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00025}00025\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_ab791f8fac403d508e1c53b6f27cf1f24}{ClockPrescaler}}\ =\ \mbox{\hyperlink{group___a_d_c___clock_prescaler_ga41b6a6d1cdf7806ec1e5790fc7fdc651}{ADC\_CLOCK\_SYNC\_PCLK\_DIV4}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00026}00026\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_a6613985e603e784c30fb3689f2c6fa5f}{Resolution}}\ =\ \mbox{\hyperlink{group___a_d_c___resolution_ga49c8408a1cdbf97bbf29234c3770fa74}{ADC\_RESOLUTION\_12B}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00027}00027\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_a67902b5cdd3d1aa4af49654409412a08}{ScanConvMode}}\ =\ \mbox{\hyperlink{group___exported__types_ggac9a7e9a35d2513ec15c3b537aaa4fba1a7d46875fa3ebd2c34d2756950eda83bf}{ENABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00028}00028\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_acb089820ffd05cfa35a3b0b89b7945fd}{ContinuousConvMode}}\ =\ \mbox{\hyperlink{group___exported__types_ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d}{DISABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00029}00029\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_aa314a1478944f8457d9c9e423719d893}{DiscontinuousConvMode}}\ =\ \mbox{\hyperlink{group___exported__types_ggac9a7e9a35d2513ec15c3b537aaa4fba1ad3a9df141be0ccf10389b640f492b26d}{DISABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00030}00030\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_a3f4a71424165638d6621d75a351cb5e0}{ExternalTrigConv}}\ =\ \mbox{\hyperlink{group___a_d_c___external__trigger___source___regular_ga349ec6a1c2a362fba718cbfd068e50dc}{ADC\_SOFTWARE\_START}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00031}00031\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_ace2c616b80bb7f1982e8a52131a2732c}{ExternalTrigConvEdge}}\ =\ \mbox{\hyperlink{group___a_d_c___external__trigger__edge___regular_gab2e3a19c05441925f9b9a482238994ac}{ADC\_EXTERNALTRIGCONVEDGE\_NONE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00032}00032\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_afe646b2571044212378bf5f722544359}{DataAlign}}\ =\ \mbox{\hyperlink{group___a_d_c___data__align_gafed5c0d327ad6d2cc0960f7943beb265}{ADC\_DATAALIGN\_RIGHT}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00033}00033\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}}.\mbox{\hyperlink{struct_a_d_c___handle_type_def_a95dcd2e98a4cfc17b0939e9ca985113a}{Init}}.\mbox{\hyperlink{struct_a_d_c___init_type_def_acc137bdcf502c586925ad8e99628b03f}{NbrOfConversion}}\ =\ \mbox{\hyperlink{adc__driver_8h_a18b5b8600b67ba3c5efd48f11c9692d8}{ADC\_CHANNEL\_COUNT}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00035}00035\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group1_ga33ddb73d4880bd425aaa43c5c52bb13a}{HAL\_ADC\_Init}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00036}00036\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00038}00038\ \ \ \ \ \textcolor{comment}{//\ DMA\ 설정}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00039}00039\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_acf2416c7f97b4f21ef16cfa5bea3cfd3}{Instance}}\ =\ \mbox{\hyperlink{group___peripheral__declaration_ga3a2efe5fd7a7a79be3b08a1670bbd016}{DMA2\_Stream0}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00040}00040\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___d_m_a___channel__selection_gabd7de138931e93a90fc6c4eab5916bbe}{DMA\_CHANNEL\_0}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00041}00041\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_ab94410c1333b512e271b1c135fe50916}{Direction}}\ =\ \mbox{\hyperlink{group___d_m_a___data__transfer__direction_gacb2cbf03ecae6804ae4a6f60a3e37c12}{DMA\_PERIPH\_TO\_MEMORY}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00042}00042\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_a4925ca3ceb52340daddc92817dc304d9}{PeriphInc}}\ =\ \mbox{\hyperlink{group___d_m_a___peripheral__incremented__mode_ga63e2aff2973d1a8f01d5d7b6e4894f39}{DMA\_PINC\_DISABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00043}00043\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_a831756fbcd64feb1e570a9bf743b5b8d}{MemInc}}\ =\ \mbox{\hyperlink{group___d_m_a___memory__incremented__mode_ga43d30885699cc8378562316ff4fed1cd}{DMA\_MINC\_ENABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00044}00044\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_aca5b89241171c093fd0fc6dacf72683c}{PeriphDataAlignment}}\ =\ \mbox{\hyperlink{group___d_m_a___peripheral__data__size_gac08bfd907442dba5358830b247135bcc}{DMA\_PDATAALIGN\_HALFWORD}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00045}00045\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_afe3adac32f5411b1a744c030f398aa5e}{MemDataAlignment}}\ =\ \mbox{\hyperlink{group___d_m_a___memory__data__size_ga2c7355971c0da34a7ffe50ec87403071}{DMA\_MDATAALIGN\_HALFWORD}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00046}00046\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_a0ffc93ec511ed9cf1663f6939bd3e839}{Mode}}\ =\ \mbox{\hyperlink{group___d_m_a__mode_ga04941acfbbdefc53e1e08133cffa3b8a}{DMA\_NORMAL}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00047}00047\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_a72acf77c0b19359eb70764505ae4bd70}{Priority}}\ =\ \mbox{\hyperlink{group___d_m_a___priority__level_ga6b2f5c5e22895f8b4bd52a27ec6cae2a}{DMA\_PRIORITY\_HIGH}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00048}00048\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}}.\mbox{\hyperlink{struct_____d_m_a___handle_type_def_a4352c7144ad5e1e4ab54a87d3be6eb62}{Init}}.\mbox{\hyperlink{struct_d_m_a___init_type_def_a8dc149e98014264da61675f6a0e18b88}{FIFOMode}}\ =\ \mbox{\hyperlink{group___d_m_a___f_i_f_o__direct__mode_gaec22b199f9da9214bf908d7edbcd83e8}{DMA\_FIFOMODE\_DISABLE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00050}00050\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___d_m_a___exported___functions___group1_ga0fbcb690074233a03f2fa366dc22ff01}{HAL\_DMA\_Init}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00051}00051\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00053}00053\ \ \ \ \ \mbox{\hyperlink{stm32f4xx__hal__def_8h_af5b3b3d0eff8c4cb59d4d3909c247311}{\_\_HAL\_LINKDMA}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ DMA\_Handle,\ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a1f70327a2d36fe619cf1120e4aac229c}{hdma}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00055}00055\ \ \ \ \ \textcolor{comment}{//\ 채널\ 설정}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00056}00056\ \ \ \ \ \mbox{\hyperlink{struct_a_d_c___channel_conf_type_def}{ADC\_ChannelConfTypeDef}}\ sConfig;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00057}00057\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_a72e649848c8a14f0adcba783cfb3b2cd}{SamplingTime}}\ =\ \mbox{\hyperlink{group___a_d_c__sampling__times_gadd2dd58764750d84b32e7c814190953e}{ADC\_SAMPLETIME\_3CYCLES}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00058}00058\ \ \ \ \ uint8\_t\ rank\ =\ 1;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00060}00060\ \textcolor{preprocessor}{\#if\ USE\_CH0}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00061}00061\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___a_d_c__channels_ga3c5075aee5af4eae02f1a72d6216199c}{ADC\_CHANNEL\_0}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00062}00062\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ab926cc2abe3d17aeaf637d499aef6b1b}{Rank}}\ =\ rank++;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00063}00063\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group3_gac6f70c4927204d6f50ab44c8e4800106}{HAL\_ADC\_ConfigChannel}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00064}00064\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00065}00065\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00066}00066\ \textcolor{preprocessor}{\#if\ USE\_CH1}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00067}00067\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___a_d_c__channels_gaeb119201733a871c94971c51843ffaac}{ADC\_CHANNEL\_1}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00068}00068\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ab926cc2abe3d17aeaf637d499aef6b1b}{Rank}}\ =\ rank++;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00069}00069\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group3_gac6f70c4927204d6f50ab44c8e4800106}{HAL\_ADC\_ConfigChannel}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00070}00070\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00071}00071\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00072}00072\ \textcolor{preprocessor}{\#if\ USE\_CH2}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00073}00073\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___a_d_c__channels_gad576132ebd78a3429be34f44e474c914}{ADC\_CHANNEL\_2}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00074}00074\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ab926cc2abe3d17aeaf637d499aef6b1b}{Rank}}\ =\ rank++;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00075}00075\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group3_gac6f70c4927204d6f50ab44c8e4800106}{HAL\_ADC\_ConfigChannel}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00076}00076\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00077}00077\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00078}00078\ \textcolor{preprocessor}{\#if\ USE\_CH3}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00079}00079\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___a_d_c__channels_ga56dba5d35f1f7bcad41e4f9a7da3b125}{ADC\_CHANNEL\_3}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00080}00080\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ab926cc2abe3d17aeaf637d499aef6b1b}{Rank}}\ =\ rank++;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00081}00081\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group3_gac6f70c4927204d6f50ab44c8e4800106}{HAL\_ADC\_ConfigChannel}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00082}00082\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00083}00083\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00084}00084\ \textcolor{preprocessor}{\#if\ USE\_CH4}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00085}00085\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ae82bf9242a014164f9f6907f29782c44}{Channel}}\ =\ \mbox{\hyperlink{group___a_d_c__channels_ga66f19737ad81a0a62eb97854d0e41a54}{ADC\_CHANNEL\_4}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00086}00086\ \ \ \ \ sConfig.\mbox{\hyperlink{struct_a_d_c___channel_conf_type_def_ab926cc2abe3d17aeaf637d499aef6b1b}{Rank}}\ =\ rank++;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00087}00087\ \ \ \ \ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ =\ \mbox{\hyperlink{group___a_d_c___exported___functions___group3_gac6f70c4927204d6f50ab44c8e4800106}{HAL\_ADC\_ConfigChannel}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00088}00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}}\ !=\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{arm__dotproduct__example__f32_8c_a88ccb294236ab22b00310c47164c53c3}{status}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00089}00089\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00091}00091\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_ae4b152efee34a1e1b521f650a59ca04e}{channel\_count}}\ =\ \mbox{\hyperlink{adc__driver_8h_a18b5b8600b67ba3c5efd48f11c9692d8}{ADC\_CHANNEL\_COUNT}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00093}00093\ \ \ \ \ \textcolor{comment}{//\ 인터럽트\ 우선순위\ 설정}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{group___c_o_r_t_e_x___exported___functions___group1_ga8581a82025a4780efd00876a66e3e91b}{HAL\_NVIC\_SetPriority}}(\mbox{\hyperlink{group___peripheral__interrupt__number__definition_gga7e1129cd8a196f4284d41db3e82ad5c8a1e5055722630fd4b12aff421964c2ebb}{DMA2\_Stream0\_IRQn}},\ 5,\ 0);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00095}00095\ \ \ \ \ \mbox{\hyperlink{group___c_o_r_t_e_x___exported___functions___group1_gaaad4492c1b25e006d69948a15790352a}{HAL\_NVIC\_EnableIRQ}}(\mbox{\hyperlink{group___peripheral__interrupt__number__definition_gga7e1129cd8a196f4284d41db3e82ad5c8a1e5055722630fd4b12aff421964c2ebb}{DMA2\_Stream0\_IRQn}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{group___c_o_r_t_e_x___exported___functions___group1_ga8581a82025a4780efd00876a66e3e91b}{HAL\_NVIC\_SetPriority}}(\mbox{\hyperlink{group___peripheral__interrupt__number__definition_gga7e1129cd8a196f4284d41db3e82ad5c8a4d69175258ae261dd545001e810421b3}{ADC\_IRQn}},\ 5,\ 0);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00097}00097\ \ \ \ \ \mbox{\hyperlink{group___c_o_r_t_e_x___exported___functions___group1_gaaad4492c1b25e006d69948a15790352a}{HAL\_NVIC\_EnableIRQ}}(\mbox{\hyperlink{group___peripheral__interrupt__number__definition_gga7e1129cd8a196f4284d41db3e82ad5c8a4d69175258ae261dd545001e810421b3}{ADC\_IRQn}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00099}00099\ \ \ \ \ \textcolor{comment}{//\ FreeRTOS\ 리소스\ 생성}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00100}00100\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}}\ =\ xQueueCreate(\mbox{\hyperlink{adc__driver_8h_a3b36e21889b14c61e44ef0882f703531}{ADC\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_a_d_c___data__t}{ADC\_Data\_t}}));}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00101}00101\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aebe38e60e228c39f982af172c626e920}{data\_mutex}}\ =\ xSemaphoreCreateMutex();}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00103}00103\ \ \ \ \ \textcolor{keywordflow}{if}\ (driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}}\ ==\ NULL\ ||\ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aebe38e60e228c39f982af172c626e920}{data\_mutex}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa5a04e395e501e4e400172c610478c4a4}{HAL\_ERROR}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00105}00105\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00107}00107\ \ \ \ \ \textcolor{comment}{//\ 샘플링\ 타이머\ 생성}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00108}00108\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}}\ =\ xTimerCreate(}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ADC\_Timer"{}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(\mbox{\hyperlink{adc__driver_8h_a85b3ce62ed0f86a3302adb72cc5091bf}{ADC\_SAMPLING\_PERIOD\_MS}}),}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ driver,}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ ADC\_Timer\_Callback}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00114}00114\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00116}00116\ \ \ \ \ \textcolor{keywordflow}{if}\ (driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}}\ ==\ NULL)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa5a04e395e501e4e400172c610478c4a4}{HAL\_ERROR}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00118}00118\ \ \ \ \ \textcolor{comment}{//\ ADC\ 태스크\ 생성}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00119}00119\ \ \ \ \ \mbox{\hyperlink{portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t}}\ result\ =\ xTaskCreate(}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00120}00120\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{adc__driver_8h_a4a6cf4ecc0b626f4d64358ad331d0757}{ADC\_Task}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ADC\_Task"{}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00122}00122\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{adc__driver_8h_a377c24b1f380ae2a13dd1c3313567913}{ADC\_TASK\_STACK\_SIZE}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00123}00123\ \ \ \ \ \ \ \ \ driver,}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00124}00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{adc__driver_8h_ab39687951bc6b9ea2e45dc21922ea8cc}{ADC\_TASK\_PRIORITY}},}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00125}00125\ \ \ \ \ \ \ \ \ \&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a235b66a2ef6a561e57b09f3391e4a692}{adc\_task\_handle}}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00126}00126\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00128}00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (result\ !=\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa5a04e395e501e4e400172c610478c4a4}{HAL\_ERROR}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00130}00130\ \ \ \ \ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a302c347bf3b6da4fa1ac89fdee54aa6c}{conversion\_complete}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00131}00131\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00132}00132\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00139}\mbox{\hyperlink{adc__driver_8h_aa44f554b8927d5c5ceb0009ae562858f}{00139}}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478f}{HAL\_StatusTypeDef}}\ \mbox{\hyperlink{adc__driver_8c_aa44f554b8927d5c5ceb0009ae562858f}{ADC\_Driver\_Start}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00140}00140\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00141}00141\ \ \ \ \ \textcolor{keywordflow}{if}\ (driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}}\ ==\ NULL)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa5a04e395e501e4e400172c610478c4a4}{HAL\_ERROR}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00142}00142\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{timers_8h_a3a9b838f48991e852ce05c986b0eeb8c}{xTimerStart}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}},\ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(100))\ !=\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa5a04e395e501e4e400172c610478c4a4}{HAL\_ERROR}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00143}00143\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00144}00144\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00151}\mbox{\hyperlink{adc__driver_8h_a6d7bfacb64232478800dc9bee1daf84b}{00151}}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478f}{HAL\_StatusTypeDef}}\ \mbox{\hyperlink{adc__driver_8c_a6d7bfacb64232478800dc9bee1daf84b}{ADC\_Driver\_Stop}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00152}00152\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00153}00153\ \ \ \ \ \textcolor{keywordflow}{if}\ (driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{timers_8h_a8327c7fc10aee414cb163b445c5269a4}{xTimerStop}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_affab3d919f8f41543b6336ccbd8cf439}{sampling\_timer}},\ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(100));}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00155}00155\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00156}00156\ \ \ \ \ \mbox{\hyperlink{group___a_d_c___exported___functions___group2_gae113bcf7fc3d8ce07d68403bb5a11560}{HAL\_ADC\_Stop\_DMA}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00157}00157\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{stm32f4xx__hal__def_8h_a63c0679d1cb8b8c684fbb0632743478fa6eb724a07061d89a4a2052744e5a3632}{HAL\_OK}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00158}00158\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00167}\mbox{\hyperlink{adc__driver_8h_aaf61bdf222fa6f5ec9720369eff97a90}{00167}}\ \mbox{\hyperlink{portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t}}\ \mbox{\hyperlink{adc__driver_8c_aaf61bdf222fa6f5ec9720369eff97a90}{ADC\_Driver\_GetData}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver,\ \mbox{\hyperlink{struct_a_d_c___data__t}{ADC\_Data\_t}}\ *data,\ \mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ timeout)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00168}00168\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00169}00169\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{queue_8h_ae8364d988c6f9b63c771cc2b3dfe5df9}{xQueueReceive}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}},\ data,\ timeout);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00170}00170\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00177}\mbox{\hyperlink{adc__driver_8h_a98272162c59734ba625d8455d095df4d}{00177}}\ uint32\_t\ \mbox{\hyperlink{adc__driver_8c_a98272162c59734ba625d8455d095df4d}{ADC\_Driver\_GetQueueCount}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00178}00178\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00179}00179\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{queue_8h_add7ee0701ba35904d190811b9e5a4eda}{uxQueueMessagesWaiting}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00180}00180\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00186}\mbox{\hyperlink{adc__driver_8h_af83458206088a7cf1ef7316d768ccd99}{00186}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{adc__driver_8c_af83458206088a7cf1ef7316d768ccd99}{ADC\_Driver\_ClearQueue}}(\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00187}00187\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00188}00188\ \ \ \ \ \mbox{\hyperlink{queue_8h_a94df8d8bc938424151f8196db2f1177b}{xQueueReset}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00189}00189\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00195}00195\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ ADC\_Timer\_Callback(\mbox{\hyperlink{timers_8h_ae2aa96927b4806e5dcfd264ba7bc8bf6}{TimerHandle\_t}}\ \mbox{\hyperlink{timerperiodchange_8c_a3e934bb5849bde559bb0310c8814e5fe}{xTimer}})}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00196}00196\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00197}00197\ \ \ \ \ \mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver\ =\ (\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *)\mbox{\hyperlink{timers_8h_a116df5c5464393c6aeda6ecec6c9e916}{pvTimerGetTimerID}}(\mbox{\hyperlink{timerperiodchange_8c_a3e934bb5849bde559bb0310c8814e5fe}{xTimer}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00198}00198\ \ \ \ \ \mbox{\hyperlink{group___a_d_c___exported___functions___group2_ga7c3ef5532dddebe7fd76bb8f589d11fd}{HAL\_ADC\_Start\_DMA}}(\&driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ (uint32\_t\ *)driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a47c3b23084c9a5fe6e4f82f67de833bd}{raw\_buffer}},\ \mbox{\hyperlink{adc__driver_8h_a18b5b8600b67ba3c5efd48f11c9692d8}{ADC\_CHANNEL\_COUNT}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00199}00199\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00205}\mbox{\hyperlink{adc__driver_8h_a4a6cf4ecc0b626f4d64358ad331d0757}{00205}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{adc__driver_8c_a4a6cf4ecc0b626f4d64358ad331d0757}{ADC\_Task}}(\textcolor{keywordtype}{void}\ *pvParameters)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00206}00206\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00207}00207\ \ \ \ \ \mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *driver\ =\ (\mbox{\hyperlink{struct_a_d_c___driver__t}{ADC\_Driver\_t}}\ *)pvParameters;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00208}00208\ \ \ \ \ \mbox{\hyperlink{struct_a_d_c___data__t}{ADC\_Data\_t}}\ adc\_data;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00210}00210\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00211}00211\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_a66540bef602522a01a519f776e4c07d8}{ulTaskNotifyTake}}(\mbox{\hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE}},\ \mbox{\hyperlink{portmacro_8h_a72723ba1e4a85ca14f25c2b9e066613d}{portMAX\_DELAY}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00213}00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{semphr_8h_af116e436d2a5ae5bd72dbade2b5ea930}{xSemaphoreTake}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aebe38e60e228c39f982af172c626e920}{data\_mutex}},\ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(100))\ ==\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ adc\_data.\mbox{\hyperlink{struct_a_d_c___data__t_ae4b152efee34a1e1b521f650a59ca04e}{channel\_count}}\ =\ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_ae4b152efee34a1e1b521f650a59ca04e}{channel\_count}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ adc\_data.\mbox{\hyperlink{struct_a_d_c___data__t_ab20b0c7772544cf5d318507f34231fbe}{timestamp}}\ =\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}();}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{adc__driver_8h_a18b5b8600b67ba3c5efd48f11c9692d8}{ADC\_CHANNEL\_COUNT}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ adc\_data.\mbox{\hyperlink{struct_a_d_c___data__t_ac65b05fe0002c84ee601dcbde61d38fe}{channel\_values}}[i]\ =\ driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_a47c3b23084c9a5fe6e4f82f67de833bd}{raw\_buffer}}[i];}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00220}00220\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{queue_8h_aae75791e91707c1e0bb31d761921531c}{uxQueueSpacesAvailable}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00222}00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_a_d_c___data__t}{ADC\_Data\_t}}\ dummy;}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00223}00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{queue_8h_ae8364d988c6f9b63c771cc2b3dfe5df9}{xQueueReceive}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}},\ \&dummy,\ 0);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00225}00225\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{queue_8h_af7eb49d3249351176992950d9185abe9}{xQueueSend}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aa08c6d308b06544cac3ff54749fe0acd}{data\_queue}},\ \&adc\_data,\ 0);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{semphr_8h_aae55761cabfa9bf85c8f4430f78c0953}{xSemaphoreGive}}(driver-\/>\mbox{\hyperlink{struct_a_d_c___driver__t_aebe38e60e228c39f982af172c626e920}{data\_mutex}});}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00228}00228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00229}00229\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00230}00230\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00236}\mbox{\hyperlink{group___a_d_c___exported___functions___group2_gaf20a88180db1113be1e89266917d148b}{00236}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group___a_d_c___exported___functions___group2_gaf20a88180db1113be1e89266917d148b}{HAL\_ADC\_ConvCpltCallback}}(\mbox{\hyperlink{struct_a_d_c___handle_type_def}{ADC\_HandleTypeDef}}\ *hadc)}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00237}00237\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00238}00238\ \ \ \ \ \textcolor{keywordflow}{if}\ (hadc-\/>\mbox{\hyperlink{struct_a_d_c___handle_type_def_abfce5509f2d1f9d3ef9012b7b7b528fa}{Instance}}\ ==\ \mbox{\hyperlink{group___peripheral__declaration_ga90d2d5c526ce5c0a551f533eccbee71a}{ADC1}})\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00239}00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t}}\ xHigherPriorityTaskWoken\ =\ \mbox{\hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE}};}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00240}00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_a4a4bcf98ad282a596e13f3f30582a11b}{vTaskNotifyGiveFromISR}}(\mbox{\hyperlink{adc__driver_8h_ac07374bb1ad17983403a31fda93f4de7}{g\_adc\_driver}}.adc\_task\_handle,\ \&xHigherPriorityTaskWoken);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00241}00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{portmacro_8h_aac6850c66595efdc02a8bbb95fb4648e}{portYIELD\_FROM\_ISR}}(xHigherPriorityTaskWoken);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00242}00242\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00243}00243\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00248}\mbox{\hyperlink{adc__driver_8h_aaf6ce196dde98712e1223b99766e06c0}{00248}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{adc__driver_8c_aaf6ce196dde98712e1223b99766e06c0}{DMA2\_Stream0\_IRQHandler}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00249}00249\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00250}00250\ \ \ \ \ \mbox{\hyperlink{group___d_m_a___exported___functions___group2_ga8c8564d06f6d39b702af1c5cbb7dd54a}{HAL\_DMA\_IRQHandler}}(\&\mbox{\hyperlink{adc__driver_8h_ac07374bb1ad17983403a31fda93f4de7}{g\_adc\_driver}}.hdma);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00251}00251\ \}}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00252}00252\ }
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00256}\mbox{\hyperlink{adc__driver_8h_a06406eadf297fa89a6eaf9586b227a69}{00256}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{adc__driver_8c_a06406eadf297fa89a6eaf9586b227a69}{ADC\_IRQHandler}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00257}00257\ \{}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00258}00258\ \ \ \ \ \mbox{\hyperlink{group___a_d_c___exported___functions___group2_ga28aaa5662eced92c5a4d23d8bd6b29ca}{HAL\_ADC\_IRQHandler}}(\&\mbox{\hyperlink{adc__driver_8h_ac07374bb1ad17983403a31fda93f4de7}{g\_adc\_driver}}.hadc);}
\DoxyCodeLine{\Hypertarget{adc__driver_8c_source_l00259}00259\ \}}

\end{DoxyCode}
