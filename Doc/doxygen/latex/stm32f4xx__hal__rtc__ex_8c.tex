\doxysection{C\+:/\+Users/\+TOVIS/test/\+Test\+Rtos/\+Drivers/\+STM32\+F4xx\+\_\+\+HAL\+\_\+\+Driver/\+Src/stm32f4xx\+\_\+hal\+\_\+rtc\+\_\+ex.c File Reference}
\hypertarget{stm32f4xx__hal__rtc__ex_8c}{}\label{stm32f4xx__hal__rtc__ex_8c}\index{C:/Users/TOVIS/test/TestRtos/Drivers/STM32F4xx\_HAL\_Driver/Src/stm32f4xx\_hal\_rtc\_ex.c@{C:/Users/TOVIS/test/TestRtos/Drivers/STM32F4xx\_HAL\_Driver/Src/stm32f4xx\_hal\_rtc\_ex.c}}


Extended RTC HAL module driver. This file provides firmware functions to manage the following functionalities of the Real-\/\+Time Clock (RTC) Extended peripheral\+:  


{\ttfamily \#include "{}stm32f4xx\+\_\+hal.\+h"{}}\newline
Include dependency graph for stm32f4xx\+\_\+hal\+\_\+rtc\+\_\+ex.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{stm32f4xx__hal__rtc__ex_8c__incl}
\end{center}
\end{figure}


\doxysubsection{Detailed Description}
Extended RTC HAL module driver. This file provides firmware functions to manage the following functionalities of the Real-\/\+Time Clock (RTC) Extended peripheral\+: 

\begin{DoxyAuthor}{Author}
MCD Application Team
\begin{DoxyItemize}
\item RTC Timestamp functions
\item RTC Tamper functions
\item RTC Wakeup functions
\item Extended Control functions
\item Extended RTC features functions
\end{DoxyItemize}
\end{DoxyAuthor}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
Copyright (c) 2016 STMicroelectronics. All rights reserved.

This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-\/\+IS.

\begin{DoxyVerb}==============================================================================
                      ##### How to use this driver #####
==============================================================================
[..]
  (+) Enable the RTC domain access.
  (+) Configure the RTC Prescaler (Asynchronous and Synchronous) and RTC hour
      format using the HAL_RTC_Init() function.

*** RTC Wakeup configuration ***
================================
[..]
  (+) To configure the RTC Wakeup Clock source and Counter use the
      HAL_RTCEx_SetWakeUpTimer() function.
      You can also configure the RTC Wakeup timer in interrupt mode using the
      HAL_RTCEx_SetWakeUpTimer_IT() function.
  (+) To read the RTC Wakeup Counter register, use the HAL_RTCEx_GetWakeUpTimer()
      function.

*** Timestamp configuration ***
===============================
[..]
  (+) To configure the RTC Timestamp use the HAL_RTCEx_SetTimeStamp() function.
      You can also configure the RTC Timestamp with interrupt mode using the
      HAL_RTCEx_SetTimeStamp_IT() function.
  (+) To read the RTC Timestamp Time and Date register, use the
      HAL_RTCEx_GetTimeStamp() function.
  (+) The Timestamp alternate function can be mapped either to RTC_AF1 (PC13)
      or RTC_AF2 (PI8) depending on the value of TSINSEL bit in RTC_TAFCR
      register.
      For STM32F446xx devices RTC_AF2 corresponds to pin PA0 and not to pin PI8.
      The corresponding pin is also selected by HAL_RTCEx_SetTimeStamp()
      or HAL_RTCEx_SetTimeStamp_IT() functions.

*** Tamper configuration ***
============================
[..]
  (+) To enable the RTC Tamper and configure the Tamper filter count, trigger
      Edge or Level according to the Tamper filter value (if equal to 0 Edge
      else Level), sampling frequency, precharge or discharge and Pull-UP use
      the HAL_RTCEx_SetTamper() function.
      You can configure RTC Tamper in interrupt mode using HAL_RTCEx_SetTamper_IT()
      function.
  (+) The TAMPER1 alternate function can be mapped either to RTC_AF1 (PC13)
      or RTC_AF2 (PI8) depending on the value of TAMP1INSEL bit in RTC_TAFCR
      register.
      The corresponding pin is also selected by HAL_RTCEx_SetTamper()
      or HAL_RTCEx_SetTamper_IT() functions.
  (+) The TAMPER2 alternate function is mapped to RTC_AF2 (PI8).
      For STM32F446xx devices RTC_AF2 corresponds to pin PA0 and not to pin PI8.

*** Backup Data Registers configuration ***
===========================================
[..]
  (+) To write to the RTC Backup Data registers, use the HAL_RTCEx_BKUPWrite()
      function.
  (+) To read the RTC Backup Data registers, use the HAL_RTCEx_BKUPRead()
      function.

*** Coarse Digital Calibration configuration ***
================================================
[..]
  (+) The Coarse Digital Calibration can be used to compensate crystal inaccuracy
      by setting the DCS bit in RTC_CALIBR register.
  (+) When positive calibration is enabled (DCS = ‘0’), 2 asynchronous prescaler
      clock cycles are added every minute during 2xDC minutes.
      This causes the calendar to be updated sooner, thereby adjusting the
      effective RTC frequency to be a bit higher.
  (+) When negative calibration is enabled (DCS = ‘1’), 1 asynchronous prescaler
      clock cycle is removed every minute during 2xDC minutes.
      This causes the calendar to be updated later, thereby adjusting the
      effective RTC frequency to be a bit lower.
  (+) DC is configured through bits DC[4:0] of RTC_CALIBR register. This number
      ranges from 0 to 31 corresponding to a time interval (2xDC) ranging from
      0 to 62.
  (+) In order to measure the clock deviation, a 512 Hz clock is output for
      calibration.
  (+) To configure the RTC Coarse Digital Calibration value and sign use the
      HAL_RTCEx_SetCoarseCalib() function.

*** Smooth Digital Calibration configuration ***
================================================
[..]
  (+) RTC frequency can be digitally calibrated with a resolution of about
      0.954 ppm with a range from -487.1 ppm to +488.5 ppm.
      The correction of the frequency is performed using a series of small
      adjustments (adding and/or subtracting individual RTCCLK pulses).
  (+) The smooth digital calibration is performed during a cycle of about 2^20
      RTCCLK pulses (or 32 seconds) when the input frequency is 32,768 Hz.
      This cycle is maintained by a 20-bit counter clocked by RTCCLK.
  (+) The smooth calibration register (RTC_CALR) specifies the number of RTCCLK
      clock cycles to be masked during the 32-second cycle.
  (+) To configure the RTC Smooth Digital Calibration value and the corresponding
      calibration cycle period (32s,16s and 8s) use the HAL_RTCEx_SetSmoothCalib()
      function.
\end{DoxyVerb}
 

Definition in file \mbox{\hyperlink{stm32f4xx__hal__rtc__ex_8c_source}{stm32f4xx\+\_\+hal\+\_\+rtc\+\_\+ex.\+c}}.

