\doxysection{3\+\_\+4\+\_\+queue\+\_\+mailbox.\+c}
\hypertarget{3__4__queue__mailbox_8c_source}{}\label{3__4__queue__mailbox_8c_source}\index{C:/Users/TOVIS/test/TestRtos/Core/Src/MainProgram/3\_4\_queue\_mailbox.c@{C:/Users/TOVIS/test/TestRtos/Core/Src/MainProgram/3\_4\_queue\_mailbox.c}}
\mbox{\hyperlink{3__4__queue__mailbox_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{main_8h}{main.h}}"{}}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{driver__init_8h}{driver\_init.h}}"{}}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00017}\mbox{\hyperlink{struct_example__t}{00017}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00018}\mbox{\hyperlink{struct_example__t_ae7f66047e6e39ba2bb6af8b95f00d1dd}{00018}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{struct_example__t_ae7f66047e6e39ba2bb6af8b95f00d1dd}{value}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00019}\mbox{\hyperlink{struct_example__t_af782dfb284708044e6a8ecb12acfef66}{00019}}\ \ \ \ \ \mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ \mbox{\hyperlink{struct_example__t_af782dfb284708044e6a8ecb12acfef66}{timestamp}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00020}00020\ \}\ \mbox{\hyperlink{struct_example__t}{Example\_t}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00022}\mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{00022}}\ \mbox{\hyperlink{queue_8h_a57349603001f8ddf51c888c49e2804d7}{QueueHandle\_t}}\ \mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{xMailbox}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00024}\mbox{\hyperlink{3__4__queue__mailbox_8c_adc3237b8851be3f6243354ccc181b7ee}{00024}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{3__4__queue__mailbox_8c_adc3237b8851be3f6243354ccc181b7ee}{vUpdaterTask}}(\textcolor{keywordtype}{void}\ *pvParams)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00025}00025\ \ \ \ \ \mbox{\hyperlink{struct_example__t}{Example\_t}}\ \mbox{\hyperlink{3__3__queue__multiplesource_8c_a7384452c99d297a5d6c0c34e752900ad}{dataToSend}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00026}00026\ \ \ \ \ uint32\_t\ counter\ =\ 0;}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{3__3__queue__multiplesource_8c_a7384452c99d297a5d6c0c34e752900ad}{dataToSend}}.value\ =\ counter++;}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ HIGHLIGHT:\ range\ 30-\/32}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00031}00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{3__3__queue__multiplesource_8c_a7384452c99d297a5d6c0c34e752900ad}{dataToSend}}.timestamp\ =\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}();}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00032}00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{queue_8h_a8e9ced123b5a0e37a36d3bbdb2e56b4e}{xQueueOverwrite}}(\mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{xMailbox}},\ \&\mbox{\hyperlink{3__3__queue__multiplesource_8c_a7384452c99d297a5d6c0c34e752900ad}{dataToSend}});}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00033}00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(\mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(500));}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00034}00034\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00035}00035\ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00037}\mbox{\hyperlink{3__4__queue__mailbox_8c_a2fdd18477f6c617ff2d5ce5d27c799a6}{00037}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{3__4__queue__mailbox_8c_a2fdd18477f6c617ff2d5ce5d27c799a6}{vReaderTask}}(\textcolor{keywordtype}{void}\ *pvParams)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00038}00038\ \ \ \ \ \mbox{\hyperlink{struct_example__t}{Example\_t}}\ receivedData;}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00039}00039\ \ \ \ \ \mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ lastTimestamp\ =\ 0;}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00041}00041\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ HIGHLIGHT:\ range\ 43-\/44}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00043}00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{queue_8h_a3f9e430276fe5244417fd82644ec8a75}{xQueuePeek}}(\mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{xMailbox}},\ \&receivedData,\ \mbox{\hyperlink{portmacro_8h_a72723ba1e4a85ca14f25c2b9e066613d}{portMAX\_DELAY}})\ ==\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}})(receivedData.\mbox{\hyperlink{struct_example__t_af782dfb284708044e6a8ecb12acfef66}{timestamp}}\ -\/\ lastTimestamp)\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Received\ value:\ \%lu\ (Tick:\ \%lu)\(\backslash\)r\(\backslash\)n"{}},}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})receivedData.\mbox{\hyperlink{struct_example__t_ae7f66047e6e39ba2bb6af8b95f00d1dd}{value}},}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})receivedData.\mbox{\hyperlink{struct_example__t_af782dfb284708044e6a8ecb12acfef66}{timestamp}});}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lastTimestamp\ =\ receivedData.\mbox{\hyperlink{struct_example__t_af782dfb284708044e6a8ecb12acfef66}{timestamp}};}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00050}00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(\mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(100));}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00052}00052\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00053}00053\ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00055}\mbox{\hyperlink{3__4__queue__mailbox_8c_a840291bc02cba5474a4cb46a9b9566fe}{00055}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{3__4__queue__mailbox_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00056}00056\ \ \ \ \ \mbox{\hyperlink{driver__init_8h_aab7f079e70f08c868bbb3fdd41b86f82}{Driver\_Init}}();}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00057}00057\ \ \ \ \ \mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{xMailbox}}\ =\ xQueueCreate(1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_example__t}{Example\_t}}));\ \ \textcolor{comment}{//\ 길이\ 1:\ 메일박스}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{3__4__queue__mailbox_8c_a451a58463b254064be02f685f8adf6c0}{xMailbox}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ xTaskCreate(\mbox{\hyperlink{3__4__queue__mailbox_8c_adc3237b8851be3f6243354ccc181b7ee}{vUpdaterTask}},\ \textcolor{stringliteral}{"{}Updater"{}},\ 1000,\ NULL,\ 2,\ NULL);}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ xTaskCreate(\mbox{\hyperlink{3__4__queue__mailbox_8c_a2fdd18477f6c617ff2d5ce5d27c799a6}{vReaderTask}},\ \ \textcolor{stringliteral}{"{}Reader"{}},\ \ 1000,\ NULL,\ 1,\ NULL);}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_aaf9dca1065c60abdeb309d56ab7293cb}{vTaskStartScheduler}}();}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00063}00063\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00064}00064\ \ \ \ \ \textcolor{keywordflow}{for}\ (;;);\ \ \textcolor{comment}{//\ 실행\ 안됨}}
\DoxyCodeLine{\Hypertarget{3__4__queue__mailbox_8c_source_l00065}00065\ \}}

\end{DoxyCode}
