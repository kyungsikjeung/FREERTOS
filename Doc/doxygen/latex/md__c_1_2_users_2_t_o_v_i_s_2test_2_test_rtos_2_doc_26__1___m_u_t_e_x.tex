\chapter{🔐 Free\+RTOS Mutex 예제 }
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x}{}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x}\index{🔐 FreeRTOS Mutex 예제@{🔐 FreeRTOS Mutex 예제}}
\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md142}%
\Hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md142}%
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md143}{}\doxysection{\texorpdfstring{1.목적 (Objective)}{1.목적 (Objective)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md143}
이 예제는 Free\+RTOS에서 {\ttfamily 뮤텍스(\+Mutex)}를 사용하여 두 개의 태스크(\+Task)가 공유 자원에 {\ttfamily 동시에 접근하지 않도록 보호}하는 방법을 설명합니다.

\DoxyHorRuler{0}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md145}{}\doxysection{\texorpdfstring{2.시스템 구성 (System Configuration)}{2.시스템 구성 (System Configuration)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md145}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 구성 요소  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 구성 요소  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endhead
RTOS  &Free\+RTOS  \\\cline{1-2}
Task1  &Mutex를 얻고 1초간 자원 사용  \\\cline{1-2}
Task2  &Mutex를 얻고 1초간 자원 사용  \\\cline{1-2}
Synchronization  &Mutex ({\ttfamily x\+Semaphore\+Create\+Mutex}) 사용  \\\cline{1-2}
\end{longtabu}


\DoxyHorRuler{0}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md147}{}\doxysection{\texorpdfstring{3.동작 시나리오 (Execution Flow)}{3.동작 시나리오 (Execution Flow)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md147}

\begin{DoxyEnumerate}
\item 시스템 시작 시 Mutex 생성
\item {\ttfamily Task1}, {\ttfamily Task2}는 각각 1초마다 Mutex를 요청
\item 먼저 Mutex를 얻은 Task만 공유 자원 사용 가능
\item 다른 Task는 Mutex가 반환될 때까지 대기
\item 공유 자원 사용 후 Mutex 반환
\item 두 Task는 번갈아 자원에 접근하며 교대로 실행
\end{DoxyEnumerate}\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md148}{}\doxysection{\texorpdfstring{4.주요 함수 (Key Functions)}{4.주요 함수 (Key Functions)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md148}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 함수명  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 함수명  }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ 설명  }\\\cline{1-2}
\endhead
{\ttfamily x\+Semaphore\+Create\+Mutex()}  &Mutex 객체 생성  \\\cline{1-2}
{\ttfamily \doxylink{semphr_8h_af116e436d2a5ae5bd72dbade2b5ea930}{x\+Semaphore\+Take()}}  &Mutex 획득 시도  \\\cline{1-2}
{\ttfamily \doxylink{semphr_8h_aae55761cabfa9bf85c8f4430f78c0953}{x\+Semaphore\+Give()}}  &Mutex 반환  \\\cline{1-2}
{\ttfamily \doxylink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{v\+Task\+Delay()}}  &지정된 시간만큼 Task 대기 상태로 전환  \\\cline{1-2}
{\ttfamily \doxylink{task_8h_aaf9dca1065c60abdeb309d56ab7293cb}{v\+Task\+Start\+Scheduler()}}  &Free\+RTOS 스케줄러 시작  \\\cline{1-2}
\end{longtabu}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md149}{}\doxysection{\texorpdfstring{5.\+UART 출력 예시 (Expected UART Output)}{5.\+UART 출력 예시 (Expected UART Output)}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md149}

\begin{DoxyCode}{0}
\DoxyCodeLine{🔵\ Task1:\ Mutex\ 얻음}
\DoxyCodeLine{🔵\ Task1:\ Mutex\ 반환}
\DoxyCodeLine{🟢\ Task2:\ Mutex\ 얻음}
\DoxyCodeLine{🟢\ Task2:\ Mutex\ 반환}
\DoxyCodeLine{🔵\ Task1:\ Mutex\ 얻음}

\end{DoxyCode}
\hypertarget{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md150}{}\doxysection{\texorpdfstring{6.시퀀스다이어그램}{6.시퀀스다이어그램}}\label{md__c_1_2_users_2_t_o_v_i_s_2test_2_test_rtos_2_doc_26__1___m_u_t_e_x_autotoc_md150}

\begin{DoxyCode}{0}
\DoxyCodeLine{@startuml}
\DoxyCodeLine{actor\ "{}Task1"{}\ as\ T1}
\DoxyCodeLine{actor\ "{}Task2"{}\ as\ T2}
\DoxyCodeLine{participant\ "{}xMutex"{}\ as\ M}
\DoxyCodeLine{}
\DoxyCodeLine{==\ 초기\ 상태\ ==}
\DoxyCodeLine{T1\ -\/>\ M\ :\ xSemaphoreTake(xMutex)}
\DoxyCodeLine{activate\ T1}
\DoxyCodeLine{M\ -\/-\/>\ T1\ :\ pdTRUE}
\DoxyCodeLine{T1\ -\/>\ T1\ :\ 공유\ 자원\ 사용\ (1초)}
\DoxyCodeLine{T1\ -\/>\ M\ :\ xSemaphoreGive(xMutex)}
\DoxyCodeLine{deactivate\ T1}
\DoxyCodeLine{}
\DoxyCodeLine{==\ Task2\ 대기\ 중\ ==}
\DoxyCodeLine{T2\ -\/>\ M\ :\ xSemaphoreTake(xMutex)}
\DoxyCodeLine{activate\ T2}
\DoxyCodeLine{M\ -\/-\/>\ T2\ :\ pdTRUE}
\DoxyCodeLine{T2\ -\/>\ T2\ :\ 공유\ 자원\ 사용\ (1초)}
\DoxyCodeLine{T2\ -\/>\ M\ :\ xSemaphoreGive(xMutex)}
\DoxyCodeLine{deactivate\ T2}
\DoxyCodeLine{}
\DoxyCodeLine{==\ 다음\ 루프\ ==}
\DoxyCodeLine{T1\ -\/>\ M\ :\ xSemaphoreTake(xMutex)}
\DoxyCodeLine{activate\ T1}
\DoxyCodeLine{M\ -\/-\/>\ T1\ :\ pdTRUE}
\DoxyCodeLine{T1\ -\/>\ T1\ :\ 공유\ 자원\ 사용\ (1초)}
\DoxyCodeLine{T1\ -\/>\ M\ :\ xSemaphoreGive(xMutex)}
\DoxyCodeLine{deactivate\ T1}
\DoxyCodeLine{}
\DoxyCodeLine{@enduml}

\end{DoxyCode}
 