<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTOS: FreeRTOS + One-shot Timer: 버튼 입력 후 백라이트 자동 OFF 제어 예제</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RTOS<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="main-nav">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- main-nav -->
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">FreeRTOS + One-shot Timer: 버튼 입력 후 백라이트 자동 OFF 제어 예제 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md48"></a></p>
<p>이 예제는 사용자 버튼을 눌렀을 때 LED 백라이트를 켜고, 5초 뒤 자동으로 끄는 One-shot 소프트웨어 타이머 제어 방식을 보여줍니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md49"></a>
1. 목적 (Objective)</h1>
<p>버튼 입력을 감지하여 백라이트 ON 5초 타이머를 통해 자동으로 백라이트 OFF 타이머가 이미 작동 중일 경우, 리셋을 통해 다시 5초 대기</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md50"></a>
2. 시스템 구성</h1>
<p>항목 설명 입력 USER_Btn (GPIO 버튼) 출력 LD1, LD2, LD3 (GPIO LED 백라이트) 타이머 xTimerCreate() 사용, 5초 One-shot 폴링 주기 50ms (디바운싱 겸용)</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md51"></a>
3. 동작 시나리오</h1>
<p>프로그램 시작 시 타이머는 대기 상태 버튼을 누르면 백라이트 ON 이후 5초 후 <a class="el" href="2__2__timer__timerreset_8c.html#a513d2a4c928a60b5f4cec6b4ffb57468">resetFlag()</a> 콜백에서 백라이트 OFF 버튼이 눌릴 때마다 타이머가 리셋되어 5초가 연장됨</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md52"></a>
4. 주요 함수</h1>
<p>함수 설명</p><ul>
<li><b><a class="el" href="group___g_p_i_o___exported___functions___group2.html#gaf2b819ea6551319ddd5670db318d2e4e">HAL_GPIO_ReadPin()</a></b> 버튼 입력 읽기</li>
<li><b><a class="el" href="group___g_p_i_o___exported___functions___group2.html#gaf4b97bdf533a02f51ef696d43b6da5c4">HAL_GPIO_WritePin()</a></b> LED 백라이트 제어</li>
<li><b>xTimerCreate()</b> 소프트웨어 타이머 생성</li>
<li><b><a class="el" href="timers_8h.html#a3a9b838f48991e852ce05c986b0eeb8c">xTimerStart()</a></b> 타이머 시작</li>
<li><b><a class="el" href="timers_8h.html#a8081b4541b752908dc55df2693e53287">xTimerReset()</a></b> 타이머 재시작</li>
<li><b><a class="el" href="timers_8h.html#a2cd9b1399fb25203be698f123846dc33">xTimerIsTimerActive()</a></b> 타이머 실행 중 여부 확인</li>
<li><b><a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a></b> 폴링 간격 제어 (50ms)</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md53"></a>
5. UART 출력 예시 (버튼 눌렀을 시)</h1>
<div class="fragment"><div class="line">reset Flag</div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md54"></a>
6. 코드 요약</h1>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (button 눌림 감지됨) {</div>
<div class="line">    <a class="code hl_function" href="2__2__timer__timerreset_8c.html#af39dc352302e4d1f7e9b908f5e3fdb71">turnOnBackLight</a>();</div>
<div class="line">    <a class="code hl_variable" href="2__2__timer__timerreset_8c.html#aaeba8066c68f59ff9aa76e5d67a96fb5">isButtonPushed</a> = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="timers_8h.html#a2cd9b1399fb25203be698f123846dc33">xTimerIsTimerActive</a>(<a class="code hl_variable" href="2__2__timer__timerreset_8c.html#a0339da893ec1c241a8a05e807284b3f0">oneShotTimerHandle</a>) == <a class="code hl_define" href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a>)</div>
<div class="line">        <a class="code hl_define" href="timers_8h.html#a3a9b838f48991e852ce05c986b0eeb8c">xTimerStart</a>(<a class="code hl_variable" href="2__2__timer__timerreset_8c.html#a0339da893ec1c241a8a05e807284b3f0">oneShotTimerHandle</a>, 0);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code hl_define" href="timers_8h.html#a8081b4541b752908dc55df2693e53287">xTimerReset</a>(<a class="code hl_variable" href="2__2__timer__timerreset_8c.html#a0339da893ec1c241a8a05e807284b3f0">oneShotTimerHandle</a>, 0);</div>
<div class="line">}</div>
<div class="ttc" id="a2__2__timer__timerreset_8c_html_a0339da893ec1c241a8a05e807284b3f0"><div class="ttname"><a href="2__2__timer__timerreset_8c.html#a0339da893ec1c241a8a05e807284b3f0">oneShotTimerHandle</a></div><div class="ttdeci">TimerHandle_t oneShotTimerHandle</div><div class="ttdef"><b>Definition</b> <a href="2__2__timer__timerreset_8c_source.html#l00007">2_2_timer_timerreset.c:7</a></div></div>
<div class="ttc" id="a2__2__timer__timerreset_8c_html_aaeba8066c68f59ff9aa76e5d67a96fb5"><div class="ttname"><a href="2__2__timer__timerreset_8c.html#aaeba8066c68f59ff9aa76e5d67a96fb5">isButtonPushed</a></div><div class="ttdeci">volatile bool isButtonPushed</div><div class="ttdef"><b>Definition</b> <a href="2__2__timer__timerreset_8c_source.html#l00010">2_2_timer_timerreset.c:10</a></div></div>
<div class="ttc" id="a2__2__timer__timerreset_8c_html_af39dc352302e4d1f7e9b908f5e3fdb71"><div class="ttname"><a href="2__2__timer__timerreset_8c.html#af39dc352302e4d1f7e9b908f5e3fdb71">turnOnBackLight</a></div><div class="ttdeci">void turnOnBackLight()</div><div class="ttdef"><b>Definition</b> <a href="2__2__timer__timerreset_8c_source.html#l00023">2_2_timer_timerreset.c:23</a></div></div>
<div class="ttc" id="aprojdefs_8h_html_aa56260e937e7e203026707e5ba944273"><div class="ttname"><a href="projdefs_8h.html#aa56260e937e7e203026707e5ba944273">pdFALSE</a></div><div class="ttdeci">#define pdFALSE</div><div class="ttdef"><b>Definition</b> <a href="projdefs_8h_source.html#l00044">projdefs.h:44</a></div></div>
<div class="ttc" id="atimers_8h_html_a2cd9b1399fb25203be698f123846dc33"><div class="ttname"><a href="timers_8h.html#a2cd9b1399fb25203be698f123846dc33">xTimerIsTimerActive</a></div><div class="ttdeci">BaseType_t xTimerIsTimerActive(TimerHandle_t xTimer) PRIVILEGED_FUNCTION</div></div>
<div class="ttc" id="atimers_8h_html_a3a9b838f48991e852ce05c986b0eeb8c"><div class="ttname"><a href="timers_8h.html#a3a9b838f48991e852ce05c986b0eeb8c">xTimerStart</a></div><div class="ttdeci">#define xTimerStart(xTimer, xTicksToWait)</div><div class="ttdef"><b>Definition</b> <a href="timers_8h_source.html#l00504">timers.h:504</a></div></div>
<div class="ttc" id="atimers_8h_html_a8081b4541b752908dc55df2693e53287"><div class="ttname"><a href="timers_8h.html#a8081b4541b752908dc55df2693e53287">xTimerReset</a></div><div class="ttdeci">#define xTimerReset(xTimer, xTicksToWait)</div><div class="ttdef"><b>Definition</b> <a href="timers_8h_source.html#l00788">timers.h:788</a></div></div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md55"></a>
7. 시퀀스 다이어그램 (PlantUML)</h1>
<div class="fragment"><div class="line">@startuml</div>
<div class="line">autonumber</div>
<div class="line">actor &quot;사용자&quot; as User</div>
<div class="line">participant &quot;detectKeyInput Task&quot; as Task</div>
<div class="line">participant &quot;One-shot Timer&quot; as Timer</div>
<div class="line">participant &quot;백라이트 (LED)&quot; as Backlight</div>
<div class="line"> </div>
<div class="line">== 버튼 눌림 ==</div>
<div class="line">User -&gt; Task: 버튼 누름</div>
<div class="line">Task -&gt; Backlight: turnOnBackLight()</div>
<div class="line">Task -&gt; Timer: xTimerStart() 또는 xTimerReset()</div>
<div class="line"> </div>
<div class="line">== 타이머 만료 (5초 후) ==</div>
<div class="line">Timer -&gt; Task: resetFlag() 콜백</div>
<div class="line">Task -&gt; Backlight: turnOffBackLight()</div>
<div class="line">@enduml</div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md56"></a>
8. 결론</h1>
<p>사용자의 단일 입력 이벤트를 트리거로, 타이머를 이용해 일정 시간 후 자동 동작을 구현할 수 있음</p>
<p>타이머 상태 확인 및 리셋 기능을 통해 사용자 경험 향상 (입력 반복 시 대기 시간 연장) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
