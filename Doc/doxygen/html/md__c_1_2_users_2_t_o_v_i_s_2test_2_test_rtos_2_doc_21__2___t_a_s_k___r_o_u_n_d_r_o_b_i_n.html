<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTOS: 🧵 FreeRTOS Task Parameter 예제 튜토리얼</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RTOS<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="main-nav">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- main-nav -->
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">🧵 FreeRTOS Task Parameter 예제 튜토리얼 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md12"></a></p>
<p>이 문서는 두 개의 FreeRTOS 태스크가 각각 다른 메시지를 UART로 출력하고, LED를 토글하는 예제를 통해 다음 개념들을 학습합니다:</p>
<ul>
<li>Task에 파라미터 전달</li>
<li>동일 우선순위 Task 간 <b>라운드 로빈(Round-Robin)</b> 동작</li>
<li>**컨텍스트 스위칭**이 어떻게 일어나는지 이해</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
1. Objective (목표)</h1>
<ul>
<li>FreeRTOS Task에 문자열 메시지를 <b>파라미터로 전달**하는 방법 학습</b></li>
<li><b>전달받은 메시지를 **UART로 주기적으로 출력</b></li>
<li>Task마다 LED를 토글하며 실행 중임을 표시</li>
<li>동일 우선순위 Task 간 <b>공정한 CPU 시간 분배</b> 구조를 체험(라운드로빈)</li>
<li>1초마다 각각의 TASK 수행되어야 하지만, 라운드 로빈발생</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
2. 🔧 주요 구성 요소</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">구성 요소  </th><th class="markdownTableHeadNone">설명  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt"><a class="el" href="1__2__task__roundrobin_8c.html#a902a64ca782182bd7360b69639f74063">Task1()</a></span>  </td><td class="markdownTableBodyNone"><span class="tt">"Task1 Msg"</span> 출력, LD1 토글  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt"><a class="el" href="1__2__task__roundrobin_8c.html#af01c7f41ef35453d7c0e896db918be88">Task2()</a></span>  </td><td class="markdownTableBodyNone"><span class="tt">"Task2 Msg"</span> 출력, LD2 토글  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">xTaskCreate()</span>  </td><td class="markdownTableBodyNone">Task 생성 시 파라미터(<span class="tt">const char*</span>) 전달  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">우선순위  </td><td class="markdownTableBodyNone">두 Task 모두 <span class="tt">priority = 1</span> (라운드 로빈 발생)  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
3. 주요 코드 요약</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md19"></a>
전역 문자열 정의</h2>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="1__2__task__roundrobin_8c.html#a8ef4f5ae2af877dac0d1ef5e5960e9ce">task1_msg</a> = <span class="stringliteral">&quot;Task1 Msg  !\r\n&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="1__2__task__roundrobin_8c.html#ac3981b111cfd2a9f6c62ca747094c8e1">task2_msg</a> = <span class="stringliteral">&quot;Task2 Msg  !\r\n&quot;</span>;</div>
<div class="line"> Task 함수 (공통 구조)</div>
<div class="ttc" id="a1__2__task__roundrobin_8c_html_a8ef4f5ae2af877dac0d1ef5e5960e9ce"><div class="ttname"><a href="1__2__task__roundrobin_8c.html#a8ef4f5ae2af877dac0d1ef5e5960e9ce">task1_msg</a></div><div class="ttdeci">const char * task1_msg</div><div class="ttdef"><b>Definition</b> <a href="1__2__task__roundrobin_8c_source.html#l00005">1_2_task_roundrobin.c:5</a></div></div>
<div class="ttc" id="a1__2__task__roundrobin_8c_html_ac3981b111cfd2a9f6c62ca747094c8e1"><div class="ttname"><a href="1__2__task__roundrobin_8c.html#ac3981b111cfd2a9f6c62ca747094c8e1">task2_msg</a></div><div class="ttdeci">const char * task2_msg</div><div class="ttdef"><b>Definition</b> <a href="1__2__task__roundrobin_8c_source.html#l00006">1_2_task_roundrobin.c:6</a></div></div>
</div><!-- fragment --><p> c void TaskX(void &lt;em&gt;pvParameters) { const char msg = (const char*) pvParameters; while (1) { HAL_UART_Transmit(&amp;huart3, (uint8_t *)msg, strlen(msg), HAL_MAX_DELAY); HAL_GPIO_TogglePin(GPIOB, LDx_Pin); vTaskDelay(pdMS_TO_TICKS(1000)); } } main 함수 </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="1__1__task__simpletask_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_function" href="driver__init_8h.html#aab7f079e70f08c868bbb3fdd41b86f82">Driver_Init</a>();</div>
<div class="line">    xTaskCreate(<a class="code hl_function" href="1__2__task__roundrobin_8c.html#a902a64ca782182bd7360b69639f74063">Task1</a>, <span class="stringliteral">&quot;Task1&quot;</span>, 256, (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="1__2__task__roundrobin_8c.html#a8ef4f5ae2af877dac0d1ef5e5960e9ce">task1_msg</a>, 1, NULL);</div>
<div class="line">    xTaskCreate(<a class="code hl_function" href="1__2__task__roundrobin_8c.html#af01c7f41ef35453d7c0e896db918be88">Task2</a>, <span class="stringliteral">&quot;Task2&quot;</span>, 256, (<span class="keywordtype">void</span>*)<a class="code hl_variable" href="1__2__task__roundrobin_8c.html#ac3981b111cfd2a9f6c62ca747094c8e1">task2_msg</a>, 1, NULL);</div>
<div class="line">    <a class="code hl_function" href="task_8h.html#aaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (1) {}</div>
<div class="line">}</div>
<div class="ttc" id="a1__1__task__simpletask_8c_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="1__1__task__simpletask_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="1__1__task__simpletask_8c_source.html#l00019">1_1_task_simpletask.c:19</a></div></div>
<div class="ttc" id="a1__2__task__roundrobin_8c_html_a902a64ca782182bd7360b69639f74063"><div class="ttname"><a href="1__2__task__roundrobin_8c.html#a902a64ca782182bd7360b69639f74063">Task1</a></div><div class="ttdeci">void Task1(void *pvParameters)</div><div class="ttdef"><b>Definition</b> <a href="1__2__task__roundrobin_8c_source.html#l00010">1_2_task_roundrobin.c:10</a></div></div>
<div class="ttc" id="a1__2__task__roundrobin_8c_html_af01c7f41ef35453d7c0e896db918be88"><div class="ttname"><a href="1__2__task__roundrobin_8c.html#af01c7f41ef35453d7c0e896db918be88">Task2</a></div><div class="ttdeci">void Task2(void *pvParameters)</div><div class="ttdef"><b>Definition</b> <a href="1__2__task__roundrobin_8c_source.html#l00021">1_2_task_roundrobin.c:21</a></div></div>
<div class="ttc" id="adriver__init_8h_html_aab7f079e70f08c868bbb3fdd41b86f82"><div class="ttname"><a href="driver__init_8h.html#aab7f079e70f08c868bbb3fdd41b86f82">Driver_Init</a></div><div class="ttdeci">void Driver_Init(void)</div><div class="ttdoc">Custom driver initialization entry point.</div><div class="ttdef"><b>Definition</b> <a href="driver_8init_8c_source.html#l00045">driver.init.c:45</a></div></div>
<div class="ttc" id="atask_8h_html_aaf9dca1065c60abdeb309d56ab7293cb"><div class="ttname"><a href="task_8h.html#aaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler</a></div><div class="ttdeci">void vTaskStartScheduler(void) PRIVILEGED_FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="tasks_8c_source.html#l01974">tasks.c:1974</a></div></div>
</div><!-- fragment --> <h1 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
4. 라운드 로빈 &amp; 컨텍스트 스위칭</h1>
<p>Task1과 Task2는 동일한 우선순위(1) 를 가지므로,</p>
<p>FreeRTOS는 Tick 마다 번갈아 Task를 실행합니다.</p>
<p><a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a>가 호출되면 해당 Task는 Block 상태가 되고, 다른 Ready 상태 Task가 즉시 실행됩니다.</p>
<p>이 방식은 Round-Robin 스케줄링이며, 모든 동일 우선순위 Task에 공평하게 CPU를 분배합니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md21"></a>
5. 시퀀스 다이어그램 (PlantUML)</h1>
<div class="fragment"><div class="line">@startuml</div>
<div class="line">actor Main</div>
<div class="line">participant Task1</div>
<div class="line">participant Task2</div>
<div class="line">participant UART</div>
<div class="line">participant LED</div>
<div class="line"> </div>
<div class="line">Main -&gt; Task1 : xTaskCreate(Task1, priority=1)</div>
<div class="line">Main -&gt; Task2 : xTaskCreate(Task2, priority=1)</div>
<div class="line">Main -&gt; Main : vTaskStartScheduler()</div>
<div class="line"> </div>
<div class="line">loop 1초 주기</div>
<div class="line">    Task1 -&gt; UART : HAL_UART_Transmit(&quot;Task1 Msg&quot;)</div>
<div class="line">    Task1 -&gt; LED : Toggle LD1</div>
<div class="line">    Task1 -&gt; Task1 : vTaskDelay(1000ms)</div>
<div class="line"> </div>
<div class="line">    Task2 -&gt; UART : HAL_UART_Transmit(&quot;Task2 Msg&quot;)</div>
<div class="line">    Task2 -&gt; LED : Toggle LD2</div>
<div class="line">    Task2 -&gt; Task2 : vTaskDelay(1000ms)</div>
<div class="line">end</div>
<div class="line">@enduml</div>
</div><!-- fragment --><p> 👉 위 다이어그램은 <a href="https://plantuml-editor.kkeisuke.com/에서">https://plantuml-editor.kkeisuke.com/에서</a> 붙여넣으면 확인 가능합니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
6. 요약</h1>
<p>항목 설명 pvParameters Task에 사용자 지정 메시지 전달 xTaskCreate() Task 등록 및 파라미터 설정 <a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a> Task를 일정 시간 동안 Block 상태로 전환 라운드 로빈 스케줄링 동일 우선순위 Task 간 CPU 분배 컨텍스트 스위칭 실행 중 Task → 다른 Task 전환</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
7. 활용 아이디어</h1>
<p>여러 디바이스 상태를 주기적으로 출력하는 구조 설계 동일 코드 기반 Task 재사용 시, 파라미터만 변경하여 동작 분기 상태 모니터링, 디버깅, LED 점멸 제어 등 Task 간 역할 분담</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
8. 결론</h1>
<p>이 예제는 FreeRTOS의 Task 기본 개념을 실습하며 다음을 이해할 수 있도록 돕습니다: Task에 문자열 파라미터를 전달하고 사용하는 방법 동일 우선순위 Task 간 라운드 로빈 방식 스케줄링 vTaskDelay와 컨텍스트 스위칭의 실동작 구조 구조화된 Task 설계와 UART + GPIO 활용 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
