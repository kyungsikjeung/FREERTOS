<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTOS: &lt;tt&gt;main.c&lt;/tt&gt; 튜토리얼</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RTOS<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<div id="main-nav">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="topics.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- main-nav -->
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title"><span class="tt">main.c</span> 튜토리얼 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md175"></a></p>
<p>이 문서는 <span class="tt">main.c</span> 예제 코드의 목적, 동작 방식 및 예상 결과에 대해 설명합니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md176"></a>
1. Objective (목표)</h1>
<p>이 예제의 주요 목표는 FreeRTOS를 사용하여 두 개의 독립적인 **태스크(Task)**를 생성하고, 각 태스크가 주기적으로 특정 동작을 수행하도록 하는 기본적인 멀티태스킹 환경을 구축하는 것입니다. 이를 통해 FreeRTOS의 태스크 생성 및 스케줄링의 기본 개념을 이해합니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md177"></a>
2. Code Description (코드 설명)</h1>
<ul>
<li><b><span class="tt"><a class="el" href="1__2__task__roundrobin_8c.html#a902a64ca782182bd7360b69639f74063">Task1(void *pvParameters)</a></span></b><ul>
<li><span class="tt">pvParameters</span>로 전달받은 문자열(<span class="tt">"Task1 Msg !\r\n"</span>)을 <span class="tt">msg</span> 포인터에 저장합니다.</li>
<li><span class="tt">while(1)</span> 무한 루프 안에서 다음 동작을 반복합니다.<ul>
<li><span class="tt"><a class="el" href="group___u_a_r_t___exported___functions___group2.html#ga01a7a7ac3cf0a262814ba44ee7580ddb">HAL_UART_Transmit()</a></span>: UART3를 통해 <span class="tt">msg</span> 문자열을 전송합니다.</li>
<li><span class="tt"><a class="el" href="group___g_p_i_o___exported___functions___group2.html#gaf5e0c89f752de5cdedcc30db068133f6">HAL_GPIO_TogglePin()</a></span>: LD1 LED(녹색)의 상태를 토글(ON/OFF)합니다.</li>
<li><span class="tt"><a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a></span>: 1000ms (1초) 동안 태스크를 대기 상태로 만듭니다. 이 시간 동안 다른 태스크가 실행될 수 있습니다.</li>
</ul>
</li>
</ul>
</li>
<li><b><span class="tt"><a class="el" href="1__2__task__roundrobin_8c.html#af01c7f41ef35453d7c0e896db918be88">Task2(void *pvParameters)</a></span></b><ul>
<li><span class="tt">pvParameters</span>로 전달받은 문자열(<span class="tt">"Task2 Msg !\r\n"</span>)을 <span class="tt">msg</span> 포인터에 저장합니다.</li>
<li><span class="tt">while(1)</span> 무한 루프 안에서 다음 동작을 반복합니다.<ul>
<li><span class="tt"><a class="el" href="group___u_a_r_t___exported___functions___group2.html#ga01a7a7ac3cf0a262814ba44ee7580ddb">HAL_UART_Transmit()</a></span>: UART3를 통해 <span class="tt">msg</span> 문자열을 전송합니다.</li>
<li><span class="tt"><a class="el" href="group___g_p_i_o___exported___functions___group2.html#gaf5e0c89f752de5cdedcc30db068133f6">HAL_GPIO_TogglePin()</a></span>: LD2 LED(파란색)의 상태를 토글(ON/OFF)합니다.</li>
<li><span class="tt"><a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a></span>: 1000ms (1초) 동안 태스크를 대기 상태로 만듭니다.</li>
</ul>
</li>
</ul>
</li>
<li><b><span class="tt"><a class="el" href="1__1__task__simpletask_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main(void)</a></span></b><ul>
<li><span class="tt"><a class="el" href="driver__init_8h.html#aab7f079e70f08c868bbb3fdd41b86f82" title="Custom driver initialization entry point.">Driver_Init()</a></span>: MCU의 하드웨어(클럭, GPIO, UART 등)를 초기화합니다.</li>
<li><span class="tt">xTaskCreate()</span>: 두 개의 태스크를 생성합니다.<ul>
<li><b><span class="tt">Task1</span></b>: <span class="tt">Task1</span> 함수를 실행하며, 스택 크기는 256, 우선순위는 1로 설정하고, <span class="tt">task1_msg</span> 문자열을 파라미터로 전달합니다.</li>
<li><b><span class="tt">Task2</span></b>: <span class="tt">Task2</span> 함수를 실행하며, 스택 크기는 256, 우선순위는 1로 설정하고, <span class="tt">task2_msg</span> 문자열을 파라미터로 전달합니다.</li>
</ul>
</li>
<li><span class="tt"><a class="el" href="task_8h.html#aaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler()</a></span>: FreeRTOS 스케줄러를 시작합니다. 이 함수가 호출되면, FreeRTOS가 CPU의 제어권을 가져가 생성된 태스크들을 스케줄링 정책에 따라 실행합니다. 이 함수 호출 이후의 코드는 실행되지 않습니다.</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md178"></a>
3. Expected Output (예상 결과)</h1>
<p>코드가 실행되면, <span class="tt">Task1</span>과 <span class="tt">Task2</span>가 번갈아 가며 실행됩니다. 두 태스크의 우선순위가 같기 때문에, FreeRTOS의 라운드 로빈(Round-Robin) 스케줄링 방식에 따라 타임 슬라이스(Time Slice)를 나누어 사용하거나, 한 태스크가 <span class="tt"><a class="el" href="task_8h.html#aa154068cecd7f31446a7a84af44ab1a3">vTaskDelay()</a></span>로 대기 상태에 들어가면 다른 태스크가 실행되는 방식으로 동작합니다.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md179"></a>
3.1. 시리얼 출력 (Serial Output)</h2>
<p>시리얼 터미널에는 1초마다 <span class="tt">Task1</span>과 <span class="tt">Task2</span>의 메시지가 번갈아 출력됩니다.</p>
<div class="fragment"><div class="line">Task1 Msg  !</div>
<div class="line">Task2 Msg  !</div>
<div class="line">Task1 Msg  !</div>
<div class="line">Task2 Msg  !</div>
<div class="line">...</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md180"></a>
3.2. LED 동작</h2>
<ul>
<li><b>LD1 (녹색 LED)</b>: 1초 주기로 깜빡입니다 (<span class="tt">Task1</span>에 의해 제어).</li>
<li><b>LD2 (파란색 LED)</b>: 1초 주기로 깜빡입니다 (<span class="tt">Task2</span>에 의해 제어).</li>
</ul>
<p>두 LED가 동시에 깜빡이는 것처럼 보일 수 있으며, 이는 두 태스크가 거의 동시에 실행되기 때문입니다.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md181"></a>
4. Task 동작 방식</h1>
<ol type="1">
<li><b>태스크 생성</b>: <span class="tt">main</span> 함수에서 <span class="tt">Task1</span>과 <span class="tt">Task2</span>가 동일한 우선순위로 생성됩니다.</li>
<li><b>스케줄러 시작</b>: <span class="tt"><a class="el" href="task_8h.html#aaf9dca1065c60abdeb309d56ab7293cb">vTaskStartScheduler()</a></span>가 호출되면, 스케줄러는 준비(Ready) 상태에 있는 태스크 중 가장 우선순위가 높은 태스크를 실행합니다. 여기서는 두 태스크의 우선순위가 같으므로, 먼저 생성된 <span class="tt">Task1</span>부터 실행될 수 있습니다.</li>
<li><b>태스크 실행 및 대기</b>: <span class="tt">Task1</span>이 실행되어 메시지를 출력하고 LED를 토글한 후, <span class="tt">vTaskDelay(1000)</span>를 만나 1초 동안 대기(Blocked) 상태가 됩니다.</li>
<li><b>컨텍스트 스위칭(Context Switching)</b>: <span class="tt">Task1</span>이 대기 상태에 들어가면, 스케줄러는 다른 준비 상태의 태스크인 <span class="tt">Task2</span>를 실행합니다. <span class="tt">Task2</span>도 마찬가지로 작업을 수행한 후 1초 대기 상태가 됩니다.</li>
<li><b>반복</b>: 이 과정이 계속 반복되면서, 두 태스크는 1초마다 번갈아 실행되는 것처럼 보입니다. 이것이 FreeRTOS의 기본적인 협력적 멀티태스킹 동작 방식입니다. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
